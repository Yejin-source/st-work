<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Lotto</title>
<link rel="stylesheet" href="css/lotto.css">	
</head>
<body>
	<div class="card">
		<h1 class="main-title">ğŸ± ë¡œë˜ ì¶”ì²¨ê¸°</h1>
		<div>state : <span id="stateVal"></span></div>
	
		<div class="lotto-container">
			<div id="num1" class="lotto-ball">0</div>
			<div id="num2" class="lotto-ball">0</div>
			<div id="num3" class="lotto-ball">0</div>
			<div id="num4" class="lotto-ball">0</div>
			<div id="num5" class="lotto-ball">0</div>
			<div id="num6" class="lotto-ball">0</div>
		</div>
		
		<div>
			<button id="start" type="button">start</button>
			<button id="end" type="button">end</button>
		</div>
	</div>
	
	<script>
	
		// ë²ˆí˜¸ì— ë”°ë¼ ìƒ‰ìƒì„ ì •í•˜ëŠ” í•¨ìˆ˜
		function getColorClass(num) {
			if(num <= 10) return 'yellow';
			if(num <= 20) return 'blue';
			if(num <= 30) return 'red';
			if(num <= 40) return 'gray';
			return 'green';
		}
	
		
		// 6ê°œì˜ ë¡œë˜ë²ˆí˜¸ìƒì„±
		let arr = new Array(45);
		for(let i=0; i<arr.length; i++) {
			arr[i] = i+1; // 1 ~ 45
		}
		// ë°°ì—´ ì„ê¸°
		for(let i=0; i<10000; i++) {
			let temp = arr[0];
			let rnum = Math.floor(Math.random()*45); // ëœë¤ ì¸ë±ìŠ¤ ìƒì„±
			arr[0] = arr[rnum];
			arr[rnum] = temp;
		} // 0 ~ 5ê¹Œì§€ë§Œ ë¡œë˜ë²ˆí˜¸ë¡œ ì‚¬ìš©
	
	
		// ì§„í–‰ ìƒíƒœê°’ ë³€ìˆ˜
		let state = 'end';
		document.querySelector('#stateVal').innerHTML = state;
		
		let num1, num2, num3, num4, num5, num6;
		
		document.querySelector('#start').addEventListener('click', function(){
			// start ì§„í–‰ ì¤‘ì¼ ë•ŒëŠ” í´ë¦­ X -> stateê°’ì´ end ìƒíƒœì—ì„œë§Œ í´ë¦­
			if(state == 'start') {
				// alert('stateê°’ì´ startì…ë‹ˆë‹¤');
				return;
			}
			
			// ìƒíƒœë¥¼ startë¡œ ë³€ê²½ í›„ í™”ë©´ì— í‘œì‹œ
			state = 'start';
			document.querySelector('#stateVal').innerHTML = state;
			
			// ëœë¤ ìˆ«ì í‘œì‹œ
			num1 = setInterval(function(){
				let n = Math.floor(Math.random()*45) + 1;
				let el = document.querySelector('#num1');
				el.innerHTML = n;
				el.className = 'lotto-ball ' + getColorClass(n); // ë‘ ê°œì˜ í´ë˜ìŠ¤ ë™ì‹œ ì ìš©
			} , 50);
			
			num2 = setInterval(function(){
				let n = Math.floor(Math.random()*45) + 1;
				let el = document.querySelector('#num2');
				el.innerHTML = n;
				el.className = 'lotto-ball ' + getColorClass(n);
			} , 50);
			
			num3 = setInterval(function(){
				let n = Math.floor(Math.random()*45) + 1;
				let el = document.querySelector('#num3');
				el.innerHTML = n;
				el.className = 'lotto-ball ' + getColorClass(n);
			} , 50);
			
			num4 = setInterval(function(){
				let n = Math.floor(Math.random()*45) + 1;
				let el = document.querySelector('#num4');
				el.innerHTML = n;
				el.className = 'lotto-ball ' + getColorClass(n);
			} , 50);
			
			num5 = setInterval(function(){
				let n = Math.floor(Math.random()*45) + 1;
				let el = document.querySelector('#num5');
				el.innerHTML = n;
				el.className = 'lotto-ball ' + getColorClass(n);
			} , 50);
			
			num6 = setInterval(function(){
				let n = Math.floor(Math.random()*45) + 1;
				let el = document.querySelector('#num6');
				el.innerHTML = n;
				el.className = 'lotto-ball ' + getColorClass(n);
			} , 50);
	
			console.log('start button click');
		});
		
		document.querySelector('#end').addEventListener('click', function(){
			// start ì§„í–‰ ì¤‘ì¼ ë•Œë§Œ í´ë¦­ O -> stateê°’ì´ start ìƒíƒœì—ì„œë§Œ í´ë¦­
			if(state == 'end') {
				// alert('stateê°’ì´ endì…ë‹ˆë‹¤');
				return;
			}
			
			// ìƒíƒœë¥¼ endë¡œ ë³€ê²½
			state = 'end';
			
			// ì‹œê°„ì°¨ë¡œ ìˆ«ì ì¶œë ¥ | 1ì´ˆ ê°„ê²©
			setTimeout(function(){
				clearInterval(num1);
		        let el = document.querySelector('#num1');
		        el.innerHTML = arr[0];
		        el.className = 'lotto-ball ' + getColorClass(arr[0]);
			}, 1);
			
			setTimeout(function(){
				clearInterval(num2);
			  	let el = document.querySelector('#num2');
		        el.innerHTML = arr[1];
		        el.className = 'lotto-ball ' + getColorClass(arr[1]);
			}, 1000);
			
			setTimeout(function(){
				clearInterval(num3);
				let el = document.querySelector('#num3');
		        el.innerHTML = arr[2];
		        el.className = 'lotto-ball ' + getColorClass(arr[2]);
			}, 2000);
			
			setTimeout(function(){
				clearInterval(num4);
				let el = document.querySelector('#num4');
		        el.innerHTML = arr[3];
		        el.className = 'lotto-ball ' + getColorClass(arr[3]);
			}, 3000);
			
			setTimeout(function(){
				clearInterval(num5);
				let el = document.querySelector('#num5');
		        el.innerHTML = arr[4];
		        el.className = 'lotto-ball ' + getColorClass(arr[4]);
			}, 4000);
			
			setTimeout(function(){
				clearInterval(num6);
				let el = document.querySelector('#num6');
		        el.innerHTML = arr[5];
		        el.className = 'lotto-ball ' + getColorClass(arr[5]);
			}, 5000);

			
			// í™”ë©´ì— ìƒíƒœê°’ ê°±ì‹ 
			document.querySelector('#stateVal').innerHTML = state;
			
			console.log('end button click');
		});
		
	</script>
</body>
</html>