<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="css/style.css">
<script type="text/javascript" src="/emp.json"></script>
</head>
<body>
	<table>
		<thead>
			<tr>
				<th>id</th>
				<th>first_name</th>
				<th>last_name</th>
				<th>email</th>
				<th>gender</th>
				<th>hiredate</th>
				<th>age</th>
			</tr>
		</thead>
		<tbody id="empList">
		</tbody>
	</table>
	<script>
		let emp = JSON.parse(JSON.stringify(data));
		
		// 메서드 체이닝 연습
	    // map() : last_name을 *로 출력 ex)Lottrington -> ***********, Aubri -> *****
		// map() : age 23 -> 20, 38 -> 30, 40 -> 40
		// filter() : age == 20
		// forEach() : 출력
		
		let html = '';
		
		emp
			.map(function(e) {
				// last_name을 *로 출력
				e.last_name = '*'.repeat(e.last_name.length);
				return e; // return을 해야 다음 map/filter로 전달 가능
			})
			
			.map(function(e) {
				// 나이에서 일의 자리 숫자 버리기
				e.age = Math.floor(e.age / 10) * 10;
				return e;
			})
			
			.filter(function(e) {
				// 나이가 20인 사람만 남기기
				return e.age === 20; // 타입까지 같아야 true
			})
			
			.forEach(function(e) {
				html += '<tr>';
					html += '<td>'+e.id+'</td>';
					html += '<td>'+e.first_name+'</td>';
					html += '<td>'+e.last_name+'</td>';
					html += '<td>'+e.email+'</td>';
					html += '<td>'+e.gender+'</td>';
					html += '<td>'+e.hiredate+'</td>';
					html += '<td>'+e.age+'</td>';
				html += '</tr>';
			});
		
		document.querySelector('#empList').innerHTML = html;
	</script>
</body>
</html>